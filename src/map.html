<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mapeamento - Example AWS App</title>
    <link rel="stylesheet" href="css/style.css">
    
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <!-- Leaflet Draw CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet-draw@1.0.4/dist/leaflet.draw.css" />
</head>
<body>
    <div class="container">
        <header>
            <h1>Example AWS App</h1>
            <nav class="nav-menu">
                <a href="index.html">Início</a>
                <a href="map.html" class="active">Mapeamento</a>
                <button id="logoutNavBtn" class="logout-btn">Sair</button>
            </nav>
        </header>
        
        <main>
            <!-- Seção de instruções -->
            <section class="instructions">
                <h3>Como usar o mapeamento:</h3>
                <ul>
                    <li>Clique no ícone de polígono <span class="icon">⬟</span> na barra de ferramentas do mapa</li>
                    <li>Clique em pontos no mapa para desenhar a área da propriedade</li>
                    <li>Clique no primeiro ponto novamente para fechar o polígono</li>
                    <li>Preencha os dados da propriedade e clique em "Salvar"</li>
                    <li>Use os controles de edição para modificar ou excluir áreas</li>
                </ul>
            </section>

            <!-- Seção do mapa -->
            <section class="map-section">
                <div class="map-header">
                    <h2>Mapa Interativo</h2>
                    <p>Desenhe polígonos para demarcar suas propriedades rurais</p>
                </div>
                <div id="map" class="map-container"></div>
            </section>

            <!-- Formulário de cadastro -->
            <section class="property-form hidden" id="propertyForm">
                <h3>Cadastrar Propriedade</h3>
                <div class="form-group">
                    <label for="propertyName">Nome da Propriedade *</label>
                    <input type="text" id="propertyName" placeholder="Ex: Fazenda Santa Maria" required>
                </div>
                <div class="form-group">
                    <label for="propertyType">Tipo de Propriedade</label>
                    <select id="propertyType">
                        <option value="fazenda">Fazenda</option>
                        <option value="sitio">Sítio</option>
                        <option value="chacara">Chácara</option>
                        <option value="terreno">Terreno Rural</option>
                        <option value="outros">Outros</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="propertyDescription">Descrição (opcional)</label>
                    <textarea id="propertyDescription" placeholder="Descrição da propriedade..." rows="3"></textarea>
                </div>
                <div class="property-info" id="propertyInfo">
                    <p><strong>Área calculada:</strong> <span id="calculatedArea">-</span> hectares</p>
                    <p><strong>Perímetro:</strong> <span id="calculatedPerimeter">-</span> metros</p>
                </div>
                <div class="btn-group">
                    <button id="savePropertyBtn" class="btn">Salvar Propriedade</button>
                    <button id="cancelFormBtn" class="btn btn-secondary">Cancelar</button>
                </div>
            </section>

            <!-- Lista de propriedades -->
            <section class="properties-list">
                <div class="section-header">
                    <h3>Minhas Propriedades</h3>
                    <button id="refreshPropertiesBtn" class="btn btn-small">Atualizar</button>
                </div>
                <div id="propertiesList" class="properties-grid">
                    <div class="loading-message">
                        <p>Carregando propriedades...</p>
                    </div>
                </div>
            </section>

            <!-- Status de operações -->
            <div id="mapStatus" class="status-message"></div>
        </main>
    </div>

    <!-- Scripts - versão simplificada -->
    <script src="js/auth.js"></script>
    
    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    
    <!-- Leaflet Draw JS -->
    <script src="https://unpkg.com/leaflet-draw@1.0.4/dist/leaflet.draw.js"></script>
    
    <!-- Turf.js for geometric calculations -->
    <script src="https://unpkg.com/@turf/turf@6.5.0/turf.min.js"></script>
    
    <!-- Nosso script do mapa -->
    <script src="js/map.js"></script>
</body>
</html>